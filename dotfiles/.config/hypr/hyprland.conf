################
### MONITORES ###
################
# Ver https://wiki.hyprland.org/Configuring/Monitors/ para más detalles
# Orden: HDMI-A-1 primero (principal, enfrente) como ID 0, luego DP-1 (izquierda)
monitor=HDMI-A-1,2560x1440@240,0x0,1  # Principal: posición origen (0x0), @240Hz
monitor=DP-1,1920x1080@144,-1920x0,1  # Secundario: a la IZQUIERDA de HDMI-A-1 (-1920x0 para offset negativo)
# Workspaces por monitor
workspace = 1, monitor:HDMI-A-1, default:true
workspace = 2, monitor:HDMI-A-1, default:true
workspace = 3, monitor:HDMI-A-1
workspace = 4, monitor:HDMI-A-1
workspace = 5, monitor:HDMI-A-1
workspace = 6, monitor:DP-1
workspace = 7, monitor:DP-1
workspace = 8, monitor:DP-1
workspace = 9, monitor:DP-1
workspace = 10, monitor:DP-1, default:true  # El tuyo en DP-1
###################
### MIS PROGRAMAS ###
###################
# Define programas que usas comúnmente
$terminal = kitty # Terminal predeterminado
$NfileManager = nnn # Gestor de archivos
$menu = wofi --show drun # Menú de lanzamiento de apps

#################
### AUTOINICIO ###
#################
# Inicia procesos necesarios al arrancar (como barras de estado, notificaciones, etc.)
# O ejecuta apps favoritas al inicio
exec-once = dbus-update-activation-environment --all
exec-once = gentoo-pipewire-launcher restart &
exec-once = hyprpm reload
exec-once = /home/sword/.local/bin/net-start
exec-once = hyprpaper
exec-once = hypridle
exec-once = swaync
exec-once = mksh ~/.config/scripts/notify.sh
exec-once = swww-daemon # Demonio wallpers
exec-once = /home/sword/.local/bin/rotate-wall.sh #script fondos de pantalla
exec-once = waybar -c ~/.config/waybar/config.json # Inicia la barra de estado Waybar
exec-once = hypridle # Inicia el gestor de inactividad Hypridle
exec-once = swaync # Inicia el centro de notificaciones SwayNC
exec-once = mksh ~/.config/scripts/notify.sh # Ejecuta script de notificaciones personal
exec-once = wl-paste --type text --watch clipman store # Guarda texto normal (Ctrl+C) en historia de Clipman
exec-once = wl-paste --primary --type text --watch clipman store # Guarda selección con mouse (primary) en historia de Clipman
exec-once = bongocat >/dev/null 2>&1 &
exec-once = sleep 3 && hyprctl dispatch focusmonitor HDMI-A-1 && hyprctl dispatch workspace 1
############################
### VARIABLES DE ENTORNO ###
#############################
# Ver https://wiki.hyprland.org/Configuring/Environment-variables/ para más detalles
env = XCURSOR_SIZE,20 # Tamaño del cursor X11
env = HYPRCURSOR_SIZE,20 # Tamaño del cursor Hyprland
env = WLR_NO_HARDWARE_CURSORS,1 # Evita glitches de cursor en hardware NVIDIA
env = GBM_BACKEND,nvidia-drm # Backend GBM principal para NVIDIA en Wayland
env = __GLX_VENDOR_LIBRARY_NAME,nvidia # Librería GLX para NVIDIA
env = LIBVA_DRIVER_NAME,nvidia # Driver VAAPI para aceleración de video en NVIDIA
env = NVD_BACKEND,direct # Backend directo para NVIDIA VAAPI
env = MOZ_ENABLE_WAYLAND,1 # Habilita Wayland en Firefox/Chromium para mejor compatibilidad
env = XCURSOR_THEME,Adwaita  # O el tema que tengas en /usr/share/icons/
env = XDG_CURRENT_DESKTOP,Hyprland

##################
### TEMAS GTK ###
##################
exec = gsettings set org.gnome.desktop.interface gtk-theme 'Catppuccin-Mocha-Standard-Blue-Dark' # Establece tema GTK a Catppuccin Mocha dark
exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark" # Prefiere esquema de colores oscuro

#####################
### APARIENCIA Y SENSACIÓN ###
#####################
source = ~/.config/hypr/theme.conf # Carga configuración de tema personalizada

# Referencia: https://wiki.hyprland.org/Configuring/Variables/
# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 5 # Espacios internos entre ventanas
    gaps_out = 7 # Espacios externos alrededor de ventanas

    col.active_border = rgba(cba6f7ee) rgba(fab387ee) 45deg #glow # Color de borde activo con gradiente y glow
    col.inactive_border = rgba(0,0,0,0.4) # Color de borde inactivo

    # Establece en true para redimensionar ventanas arrastrando bordes y gaps
    resize_on_border = false

    # Ver https://wiki.hyprland.org/Configuring/Tearing/ antes de activar
    allow_tearing = false # Deshabilita tearing para fluidez

    layout = dwindle # Layout predeterminado: Dwindle (tiling en espiral)
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 10 # Redondeo de esquinas en píxeles

    # Cambia transparencia de ventanas enfocadas/no enfocadas
    active_opacity = 1.0 # Opacidad de ventana activa
    inactive_opacity = 1.0 # Opacidad de ventana inactiva

    #   drop_shadow = true # Sombras en ventanas (descomentado para activar)
    #   shadow_range = 4
    #   shadow_render_power = 3
    #   col.shadow = rgba(1a1a1aee)

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true # Habilita efecto de desenfoque
        size = 3 # Tamaño del desenfoque
        passes = 5 # Número de pasadas para el desenfoque

        vibrancy = 0.1696 # Intensidad de vibrancy en desenfoque
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true # Habilita animaciones

    # Animaciones predeterminadas, ver https://wiki.hyprland.org/Configuring/Animations/ para más

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05 # Curva Bezier personalizada para animaciones suaves

    animation = windows, 1, 4, myBezier # Animación de entrada de ventanas
    animation = windowsOut, 1, 4, default, popin 80% # Animación de salida de ventanas
    animation = border, 1, 7, default # Animación de bordes
    animation = borderangle, 1, 8, default # Animación de ángulo de bordes
    animation = fade, 1, 7, default # Animación de fade
    animation = workspaces, 1, 4, default # Animación de cambio de workspaces
}

# Ver https://wiki.hyprland.org/Configuring/Dwindle-Layout/ para más detalles
dwindle {
    pseudotile = true # Interruptor maestro para pseudotiling. Activación con mainMod + P en keybinds
    preserve_split = true # Mantiene splits al agregar ventanas
}

# Ver https://wiki.hyprland.org/Configuring/Master-Layout/ para más detalles
master {
    new_status = master # Estado predeterminado para layout master
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    force_default_wallpaper = 1 # Establece en 0 o 1 para deshabilitar fondos anime/mascota de Hyprland
    disable_hyprland_logo = true # Si true, deshabilita el logo random de Hyprland / chica anime de fondo
}

#############
### ENTRADA ###
#############
# https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_layout = es # Layout de teclado: español
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1 # Enfoca ventana siguiendo el mouse

    sensitivity = 0 # -1.0 - 1.0, 0 significa sin modificación.

    touchpad {
        natural_scroll = false # Deshabilita scroll natural en touchpad
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
    #    workspace_swipe = false # Deslizamiento para cambiar workspaces (descomenta para activar)
}

# Configuración por dispositivo
# Ver https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs para más
device {
    name = epic-mouse-v1 # Nombre del dispositivo de mouse
    sensitivity = -0.5 # Sensibilidad del mouse
}

###################
### ATAJOS DE TECLADO ###
###################

# Ver https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Establece la tecla "Windows" como modificador principal

# Ejemplos de binds, ver https://wiki.hyprland.org/Configuring/Binds/ para más
bind = $mainMod, R, exec, /home/sword/.local/bin/rotate-wall-bind.sh
bind = $mainMod, tab, exec, ~/.config/hypr/scripts/smart-workspace-toggle.sh
bind = $mainMod, return, exec, $terminal # Super + Enter: Abre terminal
bind = $mainMod, C, killactive, # Super + C: Cierra ventana activa
bind = $mainMod SHIFT CTRL, Q, exit, # Super + Q: Sale de Hyprland
bind = $mainMod, E, exec, $fileManager # Super + E: Abre gestor de archivos
bind = $mainMod, V, togglefloating, # Super + V: Alterna flotante/no flotante
bind = $mainMod, A, exec, $menu # Super + A: Abre menú de apps
bind = $mainMod, P, pseudo, # dwindle # Super + P: Activa pseudotiling
bind = $mainMod, J, togglesplit, # dwindle # Super + J: Alterna split en dwindle
bind = $mainMod, Y, exec, grim -g "$(slurp -d)" #screenshot with grim+slurp # Super + Y: Captura pantalla seleccionada
bind = $mainMod, W, exec, ~/.config/scripts/wofi-theme.sh # Super + W: Cambia tema con script
bind = $mainMod, S, exec, clipman pick -t text # Super + S: Muestra y selecciona de historia de clipboard (texto)
bind = $mainMod, F, fullscreen, 0 # Super + F: Alterna fullscreen en ventana activa (expande/contracción)
bind = $mainMod, B, exec, opera # Super + B: Abre Opera
bind = $mainMod, D, exec, discord # Super + D: Abre Discord
bind = $mainMod, N, exec,foot -e nnn # Super + N: Abre nnn (gestor de archivos)
bind = $mainMod, T, exec, telegram-desktop # Super + T: Abre Telegram
bind = $mainMod, O, exec, obs # Super + O: Abre OBS
bind = $mainMod SHIFT, M, exec, cmus # Super + Shift + M: Abre Cmus (reproductor)
bind = $mainMod SHIFT, C, exec, keepassxc # Super + Shift + C Abre keepassxc (Gestor de contraseñas)
bind = $mainMod SHIFT, S, movetoworkspace, special:magic # Super + Shift + S: Mueve a workspace especial "magic"


# Mueve foco con mainMod + flechas
bind = $mainMod, left, movefocus, l # Super + Izquierda: Foco a ventana izquierda
bind = $mainMod, right, movefocus, r # Super + Derecha: Foco a ventana derecha
bind = $mainMod, up, movefocus, u # Super + Arriba: Foco a ventana arriba
bind = $mainMod, down, movefocus, d # Super + Abajo: Foco a ventana abajo

# Mover ventana activa al monitor específico
bind = SUPER SHIFT, left, movewindow, mon:DP-1  # SUPER+SHIFT+Izq: Mueve a izquierda (DP-1, para Discord/video)
bind = SUPER SHIFT, right, movewindow, mon:HDMI-A-1  # SUPER+SHIFT+Der: Mueve a principal (HDMI-A-1, enfrente)
# Cambiar foco a monitor entero
bind = SUPER ALT, left, focusmonitor, DP-1
bind = SUPER ALT, right, focusmonitor, HDMI-A-1



# Cambia workspaces con mainMod + [0-9]
bind = $mainMod, 1, workspace, 1 # Super + 1: Ve a workspace 1
bind = $mainMod, 2, workspace, 2 # Super + 2: Ve a workspace 2
bind = $mainMod, 3, workspace, 3 # Super + 3: Ve a workspace 3
bind = $mainMod, 4, workspace, 4 # Super + 4: Ve a workspace 4
bind = $mainMod, 5, workspace, 5 # Super + 5: Ve a workspace 5
bind = $mainMod, 6, workspace, 6 # Super + 6: Ve a workspace 6
bind = $mainMod, 7, workspace, 7 # Super + 7: Ve a workspace 7
bind = $mainMod, 8, workspace, 8 # Super + 8: Ve a workspace 8
bind = $mainMod, 9, workspace, 9 # Super + 9: Ve a workspace 9
bind = $mainMod, 0, workspace, 10 # Super + 0: Ve a workspace 10

# Otras apps
bind = $mainMod SHIFT, L, exec, waybar # Super + Shift + L: Reinicia Waybar
bind = $mainMod SHIFT, K, exec, pkill waybar # Super + Shift + K: Mata Waybar
bind = $mainMod SHIFT, N, exec, hyprpaper # Super + Shift + N: Reinicia Hyprpaper

# Mueve ventana activa a workspace con mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1 # Super + Shift + 1: Mueve a workspace 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2 # Super + Shift + 2: Mueve a workspace 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3 # Super + Shift + 3: Mueve a workspace 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4 # Super + Shift + 4: Mueve a workspace 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5 # Super + Shift + 5: Mueve a workspace 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6 # Super + Shift + 6: Mueve a workspace 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7 # Super + Shift + 7: Mueve a workspace 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8 # Super + Shift + 8: Mueve a workspace 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9 # Super + Shift + 9: Mueve a workspace 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10 # Super + Shift + 0: Mueve a workspace 10

# Desplaza por workspaces existentes con mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1 # Super + rueda abajo: Workspace siguiente
bind = $mainMod, mouse_up, workspace, e-1 # Super + rueda arriba: Workspace anterior
#bindc = , mouse:272, togglefloating  # Opcional: si quieres, déjalo para alternar flotante

# Mueve/redimensiona ventanas con mainMod + LMB/RMB y arrastrando
bindm = $mainMod, mouse:272, movewindow # Super + Click izquierdo: Mover ventana
bindm = $mainMod, mouse:274, resizewindow # Super + Click derecho: Redimensionar ventana
# Pega con middle-click (emula selección primaria de dwm, global sin mod)
bind = , mouse:274, exec, wl-paste --primary # Click medio: Pega selección primaria (texto seleccionado con mouse)


# Multimedia con Super + F-keys (adaptado para GMMK 2 Compact)
# Multimedia con Super + F-keys (adaptado para GMMK 2 Compact)
# Multimedia con Super + F-keys (adaptado para GMMK 2 Compact)
bind = $mainMod, F1, exec, sh -c "wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+"    # Super + F1: Volumen arriba
bind = $mainMod, F2, exec, sh -c "wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-"    # Super + F2: Volumen abajo
bind = $mainMod, F3, exec, sh -c "wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle"   # Super + F3: Mute audio
bind = $mainMod, F4, exec, sh -c "wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle" # Super + F4: Mute mic




# Playerctl con Super + Shift + F (para no sobrecargar F normales)
bind = $mainMod SHIFT, F7, exec, playerctl next # Super + Shift + F7: Siguiente canción
bind = $mainMod SHIFT, F8, exec, playerctl play-pause # Super + Shift + F8: Play/pausa
bind = $mainMod SHIFT, F9, exec, playerctl previous # Super + Shift + F9: Canción anterior

##############################
### VENTANAS Y WORKSPACES ###
##############################
# Swap ventana con adyacente en dirección (reordenar tiled en dwindle)
bind = $mainMod CTRL, left, swapwindow, l  # SUPER+CTRL+Izq: Swap con la izquierda
bind = $mainMod CTRL, right, swapwindow, r  # SUPER+CTRL+Der: Swap con la derecha
bind = $mainMod CTRL, up, swapwindow, u  # SUPER+CTRL+Arr: Swap con arriba
bind = $mainMod CTRL, down, swapwindow, d  # SUPER+CTRL+Abj: Swap con abajo
# Lanzar el script inteligente que revisa Docker y abre Opera
bind = $mainMod, S, exec, ~/.config/scripts/openwebui-post.sh
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

###############
### BORDES #####
################
general {
    border_size = 2
    gaps_in = 5
    gaps_out = 10

    # Azul lavanda -> Rosa flamingo
    col.active_border = rgba(89b4faee) rgba(f5c2e7ee) 45deg
    col.inactive_border = rgba(45475a99)

    allow_tearing = false
}



##################
### WORKSPACES ###
##################
# Principal (HDMI-A-1): WS1-5 atados y default WS1
workspace=1, monitor:HDMI-A-1, default:true
workspace=2, monitor:HDMI-A-1
workspace=3, monitor:HDMI-A-1
workspace=4, monitor:HDMI-A-1
workspace=5, monitor:HDMI-A-1

# Secundario (DP-1): WS6-10, default WS6 (no roba foco)
workspace=6, monitor:HDMI-A-1, default:true
workspace=7, monitor:HDMI-A-1
workspace=8, monitor:HDMI-A-1
workspace=9, monitor:HDMI-A-1
workspace=10,monitor:DP-1

# Reglas de capas (layerrule)
layerrule = blur, logout_dialog # Desenfoca diálogo de logout
layerrule = blur, swaync-control-center # Desenfoca centro de control SwayNC
layerrule = blur, swaync-notification-window # Desenfoca ventana de notificación SwayNC
layerrule = ignorezero, swaync-control-center # Ignora zero en centro de control SwayNC
layerrule = ignorezero, swaync-notification-window # Ignora zero en ventana de notificación SwayNC

# Reglas de ventanas (windowrule)
windowrule = float, class:waypaper # Hace flotante Waypaper (si usas)
windowrulev2 = suppressevent maximize, class:.* # Suprime evento de maximizar en todas las clases
windowrulev2 = nofocus, class:^$, title:^$, xwayland:1, floating # No enfoca ventanas XWayland vacías/flotantes
windowrulev2 = noblur, class:^(kitty)$

# ────────────────────── Hyprspace (overview estilo Windows/Niri) ──────────────────────
exec-once = hyprctl plugin load ~/.local/share/hyprland/plugins/hyprspace.so

plugin {
    hyprexpo {
        #general
        columns = 3
        gaps_in = 50
        gaps_out = 25
        bg_col = rgb(000000)
        workspace_method = first 1
        
        #borders
        border_color = rgb(ffffff)
        border_color_current = rgba(33ccffee) rgba(00ff99ee) 45deg
        border_color_focus   = rgba(ffdd44ee) rgba(22aaffee) 30deg
        border_color_hover   = rgba(ffffffee) rgba(999999ee) 30deg
        

        #labels
        label_enable = 1
        label_bg_shape = circle
        label_position = center-center
        label_offset_x = 10
        label_offset_y = 10
        label_color_default = rgb(ffffff)
        label_color_hover   = rgb(eeeeee)
        label_scale_hover = 1.0
        label_scale_focus = 1.0
        label_bg_enable = 1
        label_bg_color = rgba(00000088)
        label_bg_rounding = 15
        # label_padding = 1

        label_font_size = 100
        label_font_family = Sans
        label_font_bold = 1
        label_font_italic = 0
        label_text_underline = 0
        label_text_strikethrough = 0
    }
}

bind = CTRL ALT, up, hyprexpo:expo, toggle

submap = hyprexpo
bind = CTRL ALT, down, hyprexpo:expo, close

bind = , left,  hyprexpo:kb_focus, left
bind = , right, hyprexpo:kb_focus, right
bind = , up,    hyprexpo:kb_focus, up
bind = , down,  hyprexpo:kb_focus, down
bind = , return, hyprexpo:kb_confirm

# tokens 1..10: dígitos

bind = , 1, hyprexpo:kb_selecti, 1
bind = , 2, hyprexpo:kb_selecti, 2
bind = , 3, hyprexpo:kb_selecti, 3
bind = , 4, hyprexpo:kb_selecti, 4
bind = , 5, hyprexpo:kb_selecti, 5
bind = , 6, hyprexpo:kb_selecti, 6
bind = , 7, hyprexpo:kb_selecti, 7
bind = , 8, hyprexpo:kb_selecti, 8
bind = , 9, hyprexpo:kb_selecti, 9
bind = , 0, hyprexpo:kb_selecti, 0

# tokens 11..20: SHIFT+dígitos (actualiza los argumentos para que coincidan con los símbolos de tu diseño)

bind = SHIFT, 1, hyprexpo:kb_selecti, 11
bind = SHIFT, 2, hyprexpo:kb_selecti, 12
bind = SHIFT, 3, hyprexpo:kb_selecti, 13
bind = SHIFT, 4, hyprexpo:kb_selecti, 14
bind = SHIFT, 5, hyprexpo:kb_selecti, 15
bind = SHIFT, 6, hyprexpo:kb_selecti, 16
bind = SHIFT, 7, hyprexpo:kb_selecti, 17
bind = SHIFT, 8, hyprexpo:kb_selecti, 18
bind = SHIFT, 9, hyprexpo:kb_selecti, 19
bind = SHIFT, 0, hyprexpo:kb_selecti, 20

# tokens 21..46: alfa

bind = , a, hyprexpo:kb_selecti, 21
bind = , b, hyprexpo:kb_selecti, 22
bind = , c, hyprexpo:kb_selecti, 23
bind = , d, hyprexpo:kb_selecti, 24
bind = , e, hyprexpo:kb_selecti, 25
bind = , f, hyprexpo:kb_selecti, 26
bind = , g, hyprexpo:kb_selecti, 27
bind = , h, hyprexpo:kb_selecti, 28
bind = , i, hyprexpo:kb_selecti, 29
bind = , j, hyprexpo:kb_selecti, 30
bind = , k, hyprexpo:kb_selecti, 31
bind = , l, hyprexpo:kb_selecti, 32
bind = , m, hyprexpo:kb_selecti, 33
bind = , n, hyprexpo:kb_selecti, 34
bind = , o, hyprexpo:kb_selecti, 35
bind = , p, hyprexpo:kb_selecti, 36
bind = , q, hyprexpo:kb_selecti, 37
bind = , r, hyprexpo:kb_selecti, 38
bind = , s, hyprexpo:kb_selecti, 39
bind = , t, hyprexpo:kb_selecti, 40
bind = , u, hyprexpo:kb_selecti, 41
bind = , v, hyprexpo:kb_selecti, 42
bind = , w, hyprexpo:kb_selecti, 43
bind = , x, hyprexpo:kb_selecti, 44
bind = , y, hyprexpo:kb_selecti, 45
bind = , z, hyprexpo:kb_selecti, 46
submap = reset
